<div class="d-flex">
  <div class="form-inline mr-auto">
    <div class="form-group mb-2">
      <label class="mr-2"><b>Project Id:</b></label>
      <input type="number"
      class="form-control-mr-2"
      placeholder="search by project id"
      [(ngModel)]='projectFilterById'
      value="projectFilterById">
      &nbsp;
    </div>
    <div class="form-group mb-2">
      <label class="ml-4 mr-2"><b>Course Id:</b></label>
      <input mdbImput type="number"
      class="form-control-mr-2"
      placeholder="search by course id"
      [(ngModel)]='projectFilterByCourseId'
      value="projectFilterByCourseId">
    </div>
  </div>
  <div>
    <button class="btn btn-outline-primary" (click)="newProject(modalTemplate)">
      <i class="fa fa-plus-circle"></i> &nbsp;
      New Project
    </button>
  </div>
</div>

<table class="table table-striped">
  <thead class="thead-light">
    <tr>
      <th>
        <button class="btn btn-outline-primary"
        (click)="showImages()">
        <i class="{{imageShow ? 'fa fa-eye-slash' : 'fa fa-eye'}}"></i>
      </button>
    </th>
    <th>#</th>
    <th>Name</th>
    <th>Why</th>
    <th>What</th>
    <th>WhatWillWeDo</th>
    <th>Project Status</th>
    <th>Course Id</th>
    <th></th>
  </tr>
</thead>
<tbody *ngIf="projects && projects.length">
  <tr *ngFor="let project of filteredProjects">
    <td>
      <img *ngIf="imageShow"
      src="http://localhost:5000/img/{{project.image}}"
      [style.width.px] ="imageLarg"
      [style.margin.px]="imageMarg">
    </td>
    <td>{{project.id}}</td>
    <td>{{project.name}}</td>
    <td>
      <div *ngIf="!project.why">
        No completed
      </div>
      <div *ngIf="project.why">
        {{project.why}}
      </div>
    </td>
    <td>
      <div *ngIf="!project.what">
        No completed
      </div>
      <div *ngIf="project.what">
        {{project.what}}
      </div>
    </td>
    <td>
      <div *ngIf="!project.whatWillWeDo">
        No completed
      </div>
      <div *ngIf="project.whatWillWeDo">
        {{project.whatWillWeDo}}
      </div>
    </td>
    <td>{{project.projectStatus}}</td>
    <td>{{project.courseId}}</td>
    <div class="btn-group">
      <button class="btn btn-sm btn-success"
      tooltip="Edit" (click)="updateProject(project, modalTemplate)">
      <i class="fa fa-edit"></i>
      </button>
      <button class="btn btn-sm btn-danger"
      tooltip="Delete" (click)="deleteProject(project, confirm)">
      <i class="fa fa-eraser"></i>
      </button>
    </div>
  </tr>
</tbody>
<tfoot>
<tr *ngIf="!projects.length">
  <td colspan="7" class="text-center">
    <h4>
      No projects found !
    </h4>
  </td>
</tr>
</tfoot>
</table>


<div bsModal #modalTemplate="bs-modal" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="dialog-sizes-name1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
  <div class="modal-header">

    <h4 id="dialog-sizes-name1" class="modal-title pull-left" *ngIf="modoSave == 'post'">Create new project</h4>
    <h4 id="dialog-sizes-name1" class="modal-title pull-left" *ngIf="modoSave == 'put'">Update project</h4>

    <button type="button" class="close pull-right" (click)="modalTemplate.hide()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="registerForm">
      <div class="form-row">
        <div class="form-group col-md-12">
          <label>
            <h6>Name</h6>
          </label>
          <input type="text" class="form-control"
          [ngClass]="{'is-invalid': registerForm.get('name').errors && registerForm.get('name').touched}"
          formControlName="name"
          placeholder="Type the name of project">
          <div class="invalid-feedback">
            Name must to be typed !
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label>
            <h6>Why</h6>
          </label>
          <input type="text" class="form-control"
          formControlName="why" placeholder="Type why to do this project">
          <div class="text-danger">
            *Optional
          </div>
        </div>
        <div class="form-group col-md-6">
          <label>
            <h6>What</h6>
          </label>
          <input type="text" class="form-control"
          formControlName="what" placeholder="Type what is this project">
          <div class="text-danger">
            *Optional
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-8">
          <label>
            <h6>What Will We Do</h6>
          </label>
          <input type="text" class="form-control"
          formControlName="whatWillWeDo" placeholder="Type what we will do in this project">
          <div class="text-danger">
            *Optional
          </div>
        </div>
        <div class="form-group col-md-4">
          <label>
            <h6>Project Status</h6>
          </label>
          <select class="form-control"
          formControlName="projectStatus" placeholder="project status">

          <option *ngFor="let key of keys ; index as i" [value]="i" [label]="projectStatus[key]"></option>

        </select>
        <div class="text-danger">
          *Optional
        </div>
      </div>
      <div class="form-group col-md-7">
        <label>
          <h6>Image</h6>
        </label>
        <input type="text" class="form-control"
        formControlName="image" placeholder="Image URL">
        <div class="text-danger">
          *Optional
        </div>
      </div>
      <div class="form-group col-md-4">
        <label>
          <h6>Course</h6>
        </label>
        <select class="form-control"
        [ngClass]="{'is-invalid': registerForm.get('courseId').errors && registerForm.get('courseId').touched}"
        formControlName="courseId" placeholder="Course">
        <option *ngFor="let course of courses">{{course.id}}</option>
      </select>
      <div class="invalid-feedback">
        Course Id must to be choiced !
      </div>
    </div>
  </div>
</form>
</div>
<div class="modal-footer d-flex">
<button class="btn btn-secondary" (click)="modalTemplate.hide()">
  Close
</button>
<button class="btn btn-primary ml-auto" [disabled]="!registerForm.valid" (click)="saveChanges(modalTemplate)">
  Save Changes
</button>
</div>
</div>
</div>
</div>

<div bsModal #confirm="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
<div class="modal-dialog modal-sm">
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title pull-left">
        Deleting project
      </h4>
      <button type="button" class="close pull-right" (click)="confirm.hide()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>{{excludeProject}}</p>
    </div>
    <div class="modal-footer btn-group d-flex">
      <button type="button" class="btn btn-outline-primary" (click)="confirm.hide()">
        NO SURE, CANCEL
      </button>
      <button type="button" class="btn btn-outline-danger" (click)="confirmDelete(confirm)">
        YES! DELETE
      </button>
    </div>
  </div>
</div>
</div>
